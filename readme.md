# 定义PWA

32亿人使用不同设备，不同网速上网， PWA成为Web开发者新机会。速度更快，富有弹性，且更吸引人。

PWA（Progress Web Apps）, 改善用户体验。Twitter, FlipKart, 如何建立自己的PWA。 关键部分是Service Worker, 生命周期。

架构方法，最佳组织代码。 汲取功能， 应用外壳架构。Twitter Lite, 

## 理解PWA

构建一个完全离线的网站，为用户提供几乎是瞬间加载的体验，安全及富有弹性。释放浏览器的这些能力，即PWA能力。

什么让Web 成为渐进式的。 

- PWA优势
  原生应用能提供更好的整体用户体验， 会立即加载。弹性， 吸引人。 
  以下特点
  * 响应式
  * 独立于网络连接
  * 类似原生应用的交互体验
  * 如终保持更新
  * 安全
  * 可发现
  * 可重连
  * 可安装
  * 可链接

  构建网站方式的转变， 开始构建可以应对不断变化的网络条件或无网络连接的网站。

  老浏器怎么办？ 渐进式的， 即使在一个不支持的老旧浏览器上，也可以做为普通网站运行。是一种增强体验。

  基础

  > _"这些应用没有通过应用商店进行打包或部署，它们只是汲取了所需要的原生功能的网站而已_"

  manifest 文件， 包含网站相关的信息， 图标， 背景屏幕， 颜色和默认方向。

  Service Workers 深入网络请求并构建更好的Web体验。 添加到设备的主屏幕。

  离线工作， 选择性地缓存部分网站提供离线体验。

  拦截并缓存任何来自你网络的网络请求。 深入了解缓存。

  简单

  - 构建PWA的业务场景
    最棒的一点是可以一步步地来增强现有的Web应用。 
    在线业务是报纸， 完全离线？ 没有网络连接的现场也能收集信息。
    回到网络区域， 可以同步到服务器。

    印度电商Flipkart 在网站上购买的可能性高达70%!
    添加到主屏幕是重新与用户接触的好方法。
    搜索引擎， 

    先访问网络的一部分， 无需下载庞大的文件。 
    正确的缓存技术的PWA可以保存用户数据并立即为用户提供功能。 

    fetch 拦截url 图片换  用fetch 去请求新的

    Service Workers 功能过于强大， 所以要用https, 防黑客.

    第一次访问网站时， 并不会有激活的Service Worker来控制页面。 

    SPA或用AJAX进行交互的网页。 尽快开始工作

    WebP图片格式， 由Google开发， 文件大小少26%, 图片质量不会受到影响。

    HTTP请求中传递accept: image/webp首部通知支持。 

    Service Workers 开启了一个无限可能性的世界， 可以扩展至其他的图片格式， 甚至是缓存。 

    节省数据功能。 加一个新的首部。 
  
    找这个新的首部返回相应的内容。 为用户节省数据。 更轻量的图片， 更小的视频，不同的标记。 

    字体能增强外观感觉， 但字体不是必需的。 

    Data Server

    417 无法满足预期请求

  
    